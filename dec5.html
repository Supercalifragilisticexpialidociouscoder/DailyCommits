<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Minimal To-Do</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="title-block">
        <div class="title">
          Minimal Tasks
          <span class="title-pill">Day 5</span>
        </div>
        <div class="subtitle">Capture the essentials. No clutter.</div>
      </div>
    </header>

    <div class="chip-row">
      <div class="chip">
        <span class="chip-dot"></span> Auto-focus on load
      </div>
      <div class="chip">
        <span class="chip-key">Enter</span> to add
      </div>
      <div class="chip">
        <span class="chip-key">Click</span> to toggle
      </div>
    </div>

    <div class="input-row">
      <input
        id="taskInput"
        class="task-input"
        type="text"
        placeholder="What do you need to get done?"
        maxlength="80"
      />
      <button class="add-btn" id="addBtn">
        <span>+</span> Add
      </button>
    </div>

    <div class="list-wrapper" id="listWrapper">
      <div class="empty-state" id="emptyState">
        Your list is peacefully empty.
      </div>
      <ul id="todoList"></ul>
    </div>

    <footer class="footer">
      <div>
        <span class="count-dot"></span>
        <span id="counter">0 tasks</span>
      </div>
      <button class="clear-btn" id="clearBtn">Clear completed</button>
    </footer>
  </div>

  <script>
    const input = document.getElementById("taskInput");
    const addBtn = document.getElementById("addBtn");
    const list = document.getElementById("todoList");
    const counterEl = document.getElementById("counter");
    const emptyState = document.getElementById("emptyState");
    const clearBtn = document.getElementById("clearBtn");

    // Focus input on load
    window.addEventListener("load", () => input.focus());

    function updateEmptyState() {
      const hasItems = list.children.length > 0;
      emptyState.style.display = hasItems ? "none" : "flex";
    }

    function updateCounter() {
      const total = list.children.length;
      const done = [...list.children].filter((item) =>
        item.querySelector(".text").classList.contains("done")
      ).length;

      if (total === 0) {
        counterEl.textContent = "No tasks";
      } else if (done === 0) {
        counterEl.textContent = `${total} task${total > 1 ? "s" : ""}`;
      } else {
        counterEl.textContent = `${done}/${total} done`;
      }
    }

    function formatTime(date) {
      return date.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });
    }

    function createTodoItem(text) {
      const li = document.createElement("li");
      li.className = "todo-item";

      const left = document.createElement("div");
      left.className = "left";

      const checkbox = document.createElement("button");
      checkbox.className = "checkbox";
      checkbox.type = "button";

      const span = document.createElement("span");
      span.className = "text";
      span.textContent = text;

      left.appendChild(checkbox);
      left.appendChild(span);

      const meta = document.createElement("div");
      meta.className = "meta";

      const timeTag = document.createElement("span");
      timeTag.className = "time-tag";
      timeTag.textContent = formatTime(new Date());

      const delBtn = document.createElement("button");
      delBtn.className = "delete-btn";
      delBtn.type = "button";
      delBtn.innerHTML = "âœ•";

      meta.appendChild(timeTag);
      meta.appendChild(delBtn);

      li.appendChild(left);
      li.appendChild(meta);

      // Events
      checkbox.addEventListener("click", () => {
        checkbox.classList.toggle("done");
        span.classList.toggle("done");
        updateCounter();
      });

      delBtn.addEventListener("click", () => {
        li.remove();
        updateEmptyState();
        updateCounter();
      });

      return li;
    }

    function addTask() {
      const value = input.value.trim();
      if (!value) return;

      const item = createTodoItem(value);
      list.prepend(item);
      input.value = "";
      input.focus();

      updateEmptyState();
      updateCounter();
    }

    addBtn.addEventListener("click", addTask);

    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        addTask();
      }
    });

    clearBtn.addEventListener("click", () => {
      [...list.children].forEach((item) => {
        const textEl = item.querySelector(".text");
        if (textEl.classList.contains("done")) {
          item.remove();
        }
      });
      updateEmptyState();
      updateCounter();
    });
  </script>
</body>
</html>